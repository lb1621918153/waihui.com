    <include file="Base/css"/>
</head>
<body>
<!-- WRAPPER -->
<div id="wrapper">
    <!-- NAVBAR -->
    <include file="Base/navbar"/>
    <!-- END NAVBAR -->
    <!-- LEFT SIDEBAR -->
    <include file="Base/sidebar"/>
    <!-- END LEFT SIDEBAR -->
    <!-- MAIN -->
    <div class="main">
        <!-- MAIN CONTENT -->
        <div class="main-content">
            <div class="container-fluid">
                <h3 class="page-title">产品管理</h3>
                <div>
                    <!-- BORDERED TABLE -->
                    <div class="panel">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-sm-6">
                                    <h3 class="panel-title">产品信息表</h3>
                                </div>
                                <div class="col-sm-6 text-right">
                                    <a href="__CONTROLLER__/Add" class="btn btn-primary">添加产品信息</a>
                                </div>
                            </div>
                        </div>
                        <div class="panel-body">
                            <table class="table table-bordered">
                                <thead>
                                <tr>
                                    <th>产品名称</th>
                                    <th>当前值</th>
                                    <th>最低值</th>
                                    <th>最高值</th>
                                    <th>开盘</th>
                                    <th>昨收</th>
                                    <th>手续费</th>
                                    <th>是否显示</th>
                                    <th width="200">操作</th>
                                </tr>
                                </thead>
                                <tbody>
                                <volist name="products" id="product" empty="$empty">
                                <tr class="user-table-font-size">
                                    <td>{$product.product_name}</td>
                                    <td>{$product.current}</td>
                                    <td>{$product.lowest}</td>
                                    <td>{$product.highest}</td>
                                    <td>{$product.open}</td>
                                    <td>{$product.income}</td>
                                    <td>{$product.handing_fee}%</td>
                                    <td>
                                        <if condition="$product.enable == 1">
                                            <button data-id="{$product.id}" onclick="disenable(this)" class="btn btn-success" title="当前前台用户可见">显示</button>
                                            <button data-id="{$product.id}" onclick="enable(this)" class="btn btn-danger hidden" title="当前前台用户不可见">隐藏</button>
                                        </if>
                                        <if condition="$product.enable == 0">
                                            <button data-id="{$product.id}" onclick="disenable(this)" class="btn btn-success hidden" title="当前前台用户可见">显示</button>
                                            <button data-id="{$product.id}" onclick="enable(this)" class="btn btn-danger" title="当前前台用户不可见">隐藏</button>
                                        </if>
                                    </td>
                                    <td>
                                        <button type="button" class="btn btn-danger" data-id="{$product.id}" data-toggle="modal" data-target="#writeIntro" title="删除后不可找回" onclick="delData(this)">
                                            删除
                                        </button>
                                        <button type="button" class="btn btn-primary" data-id="{$product.id}" onclick="showData(this)">
                                            编辑
                                        </button>
                                    </td>
                                </tr>
                                </volist>
                                </tbody>
                            </table>

                            <div class="pages">
                                {$page}
                            </div>
                        </div>
                        <!-- END BORDERED TABLE -->
                    </div>
                </div>
            </div>
        </div>
        <!-- END MAIN CONTENT -->
    </div>
    <!-- END MAIN -->
    <include file="Base/footer"/>
</div>
<!-- END WRAPPER -->
<!-- Javascript -->
<include file="Base/script"/>
<script>
    const SCOPE = {
        updatePwdUrl: '__MODULE__/admin/update',
        deleteDataUrl: '__CONTROLLER__/del',
        showDataUrl: '__CONTROLLER__/detail',
        enableUrl: '__CONTROLLER__/enable',
        disenableUrl: '__CONTROLLER__/disenable'
    };
    
    function enable(ref) {
        $.post(SCOPE.enableUrl, {id: $(ref).attr('data-id')}, function (res) {
            if (res.code === 0) {
                $(ref).toggleClass('hidden');
                $(ref).prev().toggleClass('hidden');
            } else {
              showTip(res.msg);
            }
        }, 'json')
            .error(function (err) {
               showTip('请求失败');
            });
    }

    function disenable(ref) {
        $.post(SCOPE.disenableUrl, {id: $(ref).attr('data-id')}, function (res) {
            if (res.code === 0) {
                $(ref).toggleClass('hidden');
                $(ref).next().toggleClass('hidden');
            } else {
                showTip(res.msg);
            }
        }, 'json')
            .error(function (err) {
                showTip('请求失败');
            });
    }
</script>
</body>
</html>
